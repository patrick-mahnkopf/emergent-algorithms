"use strict";(self.webpackChunkangular_portfolio=self.webpackChunkangular_portfolio||[]).push([[86],{9086:(v,d,i)=>{i.r(d),i.d(d,{DemoComponent:()=>C});var s=i(2096),l=i(655),m=i(4097);let p=(()=>{class o{constructor(t){this.demoCanvas=t,this.timeSinceFPSUpdate=0,this.fpsCounter=0,this.avgFPS=0}update(t){const n=(t-this.previousStartTime)/1e3;this.previousStartTime=t;const c=Math.round(1/n);isNaN(n)||(this.timeSinceFPSUpdate+=n,this.fpsCounter++,this.avgFPS+=c),this.timeSinceFPSUpdate>=1&&(this.demoCanvas.onFpsUpdate(Math.round(this.avgFPS/this.fpsCounter)),this.avgFPS=0,this.fpsCounter=0,this.timeSinceFPSUpdate=0)}}return o.\u0275fac=function(t){return new(t||o)(s.LFG(m.B))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),u=(()=>{class o{constructor(t,e,n){this.resolver=t,this.demoCanvas=e,this.fpsCounter=n,this.BOIDS_COMPONENT_NAME="boids",this.ANTS_COMPONENT_NAME="ants",this.initialFactory=this.BOIDS_COMPONENT_NAME}init(t){return(0,l.mG)(this,void 0,void 0,function*(){this.demoContainer=t,document.getElementById("demo-simulation-wrapper").classList.replace("hidden","demo-simulation-wrapper");const{BoidsComponent:e}=yield Promise.all([i.e(592),i.e(234)]).then(i.bind(i,4234)),{AntsComponent:n}=yield Promise.all([i.e(592),i.e(989)]).then(i.bind(i,7989));this.componentFactories=new Map([[this.BOIDS_COMPONENT_NAME,e],[this.ANTS_COMPONENT_NAME,n]]),this.activateDemo(this.initialFactory)})}getFactory(t){return this.resolver.resolveComponentFactory(t)}activateDemo(t){if(!this.componentFactories.has(t))throw new Error(`No ComponentFactory named ${t}!`);null!=this.activeComponent&&this.stopDemo(),this.demoContainer.clear(),this.demoCanvas.removeAllChildrenFromStage(),this.demoCanvas.addFpsCounterToStage();const e=this.componentFactories.get(t);this.activeComponent=this.demoContainer.createComponent(e),this.demoCanvas.app.view.addEventListener("click",n=>this.activeComponent.instance.onTouch(n)),this.startDemo()}startDemo(){this.activeComponent.instance.init(),this.initComponentUI(),this.startSimulation()}initComponentUI(){this.initSliderColors(),this.demoCanvas.checkFullscreenSupported()}startSimulation(){this.animationFrameRequestID=window.requestAnimationFrame(this.gameLoop.bind(this))}gameLoop(t){this.activeComponent.instance.update(t),this.fpsCounter.update(t),this.startSimulation()}stopDemo(){this.stopSimulation(),null!=this.activeComponent&&this.activeComponent.instance.unloadResources()}stopSimulation(){window.cancelAnimationFrame(this.animationFrameRequestID)}initSliderColors(){const t=document.getElementById("color-holder"),e=window.getComputedStyle(t).getPropertyValue("color"),n=window.getComputedStyle(t).getPropertyValue("background-color"),c=document.getElementsByClassName("slider");for(const a of c)a.style.background="linear-gradient(to right, "+n+" 0%, "+n+" 50%, "+e+" 50%, "+e+" 100%)",a.oninput=function(){const h=(parseInt(a.value)-parseInt(a.min))/(parseInt(a.max)-parseInt(a.min))*100;a.style.background="linear-gradient(to right, "+n+" 0%, "+n+" "+h+"%, "+e+" "+h+"%, "+e+" 100%)"}}}return o.\u0275fac=function(t){return new(t||o)(s.LFG(s._Vd),s.LFG(m.B),s.LFG(p))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),C=(()=>{class o{constructor(t,e){this.demoService=t,this.demoCanvas=e}init(t,e){this.demoContainer=e,this.demoCanvas.init(t,this),this.demoCanvas.loadResources()}onLoadFinished(){this.demoService.init(this.demoContainer)}activateDemo(t){this.demoService.activateDemo(t)}onDestroy(){console.log("Demo onDestroy"),this.demoService.stopDemo(),this.demoCanvas.unloadResources()}}return o.\u0275fac=function(t){return new(t||o)(s.Y36(u),s.Y36(m.B))},o.\u0275cmp=s.Xpm({type:o,selectors:[["app-demo"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),o})()}}]);