"use strict";(self.webpackChunkangular_portfolio=self.webpackChunkangular_portfolio||[]).push([[710],{5710:(y,S,a)=>{a.r(S),a.d(S,{BoidsComponent:()=>Z});var u=a(2862),I=a(6762),r=a(1142);class b extends I.p{constructor(l,t,i){super(i),this.bottomUiService=l,this.demoCanvas=t,this.width=48,this.height=48,this.anchor.set(.5,.5),this.init()}get maxSpeed(){return this.bottomUiService.getMaxSpeed()}get movementSpeed(){return this.maxSpeed/8}init(){this.initPosition(),this.initVelocity(),this.initAngle()}initPosition(){const l=new r.W(u.d.getRandomIntInclusive(this.width/2,this.demoCanvas.width-this.width/2),u.d.getRandomIntInclusive(this.height/2,this.demoCanvas.height-this.height/2));this.setPosition(l)}initVelocity(){this.velocity=new r.W(u.d.getRandomIntInclusive(-this.maxSpeed,this.maxSpeed),u.d.getRandomIntInclusive(-this.maxSpeed,this.maxSpeed))}initAngle(){this.setAngle(u.d.getRandomIntInclusive(0,360))}move(l){this.updatePosition(l),this.updateAnimation(l,10,this.movementSpeed),this.setAngleFromVelocity()}updatePosition(l){const i=this.velocity.normalized.multiplyByScalar(this.movementSpeed).multiplyByScalar(l);this.velocity=this.velocity.addVector2D(i).clampMagnitude(this.maxSpeed);const s=this.getPosition().addVector2D(this.velocity);this.setPosition(s)}birdInVisionRange(l){const t=this.getPosition(),i=l.getPosition();return t.distanceTo(i)<this.bottomUiService.getVisualRange()}birdTooClose(l){return this.getPosition().distanceTo(l.getPosition())<20}}var e=a(2096);let A=(()=>{class n{constructor(){this.COHERENCE_SLIDER_NAME="coherence-slider",this.SEPARATION_SLIDER_NAME="separation-slider",this.ALIGNMENT_SLIDER_NAME="alignment-slider",this.VISUAL_RANGE_SLIDER_NAME="visualRange-slider",this.MAX_SPEED_SLIDER_NAME="maxSpeed-slider",this.DEFAULT_COHERENCE_WEIGHT=.005,this.DEFAULT_SEPARATION_WEIGHT=.05,this.DEFAULT_ALIGNMENT_WEIGHT=.05,this.DEFAULT_VISUAL_RANGE=150,this.DEFAULT_MAX_SPEED=5,this.UIVariables=new Map([[this.COHERENCE_SLIDER_NAME,this.DEFAULT_COHERENCE_WEIGHT],[this.SEPARATION_SLIDER_NAME,this.DEFAULT_SEPARATION_WEIGHT],[this.ALIGNMENT_SLIDER_NAME,this.DEFAULT_ALIGNMENT_WEIGHT],[this.VISUAL_RANGE_SLIDER_NAME,this.DEFAULT_VISUAL_RANGE],[this.MAX_SPEED_SLIDER_NAME,this.DEFAULT_MAX_SPEED]]),this.UI_VARIABLES_DEFAULTS=new Map(this.UIVariables),this.UISliders=new Map}initSliders(){const i=document.getElementById("bottom-ui-slider-wrapper").getElementsByClassName("slider");for(const s of i)this.UISliders.has(s.id)||this.UISliders.set(s.id,s)}onSliderClicked(t){const i=t.target;this.setUIVariableWeightModifier(i.id,+i.value/100)}setUIVariableWeightModifier(t,i){let s=2*this.UI_VARIABLES_DEFAULTS.get(t)*i;("visualRange-slider"===t||"maxSpeed-slider"===t)&&(s=Math.max(1,s)),this.UIVariables.set(t,s)}reset(){this.resetVariables(),this.resetSliders()}resetVariables(){this.UIVariables=new Map(this.UI_VARIABLES_DEFAULTS)}resetSliders(){this.UISliders.forEach(t=>{t.value="50"})}getUIVariable(t){return this.UIVariables.get(t)}getCoherenceWeight(){return this.getUIVariable(this.COHERENCE_SLIDER_NAME)}getSeparationWeight(){return this.getUIVariable(this.SEPARATION_SLIDER_NAME)}getAlignmentWeight(){return this.getUIVariable(this.ALIGNMENT_SLIDER_NAME)}getVisualRange(){return this.getUIVariable(this.VISUAL_RANGE_SLIDER_NAME)}getMaxSpeed(){return this.getUIVariable(this.MAX_SPEED_SLIDER_NAME)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=a(4097);let E=(()=>{class n{constructor(t,i){this.bottomUiService=t,this.demoCanvas=i}init(t){this.birds=t}update(t){if(null!=this.previousTimeStamp){const i=t-this.previousTimeStamp;this.birds.forEach(s=>{this.applyBoidRules(s),this.applyCanvasBoundsRule(s),s.move(i)})}this.previousTimeStamp=t}applyBoidRules(t){const i=this.bottomUiService.getCoherenceWeight(),s=this.bottomUiService.getSeparationWeight(),o=this.bottomUiService.getAlignmentWeight(),g=t.getPosition();let d=new r.W(0,0),c=new r.W(0,0),h=new r.W(0,0),p=new r.W(0,0),v=0;this.birds.forEach(m=>{if(t===m)return;const T=m.getPosition();if(t.birdInVisionRange(m)&&(d=d.addVector2D(T),h=h.addVector2D(m.velocity),v++),t.birdTooClose(m)){const C=g.subtractVector2D(T);c=c.addVector2D(C)}}),v>0?(d=d.divideByScalar(v),h=h.divideByScalar(v),p=h.subtractVector2D(t.velocity),p=p.multiplyByScalar(o)):d=g;const f=d.subtractVector2D(g).multiplyByScalar(i);c=c.multiplyByScalar(s),t.addVelocity(f),t.addVelocity(c),t.addVelocity(p)}applyCanvasBoundsRule(t){const s=t.movementSpeed,o=t.getPosition(),d=this.demoCanvas.width-0,h=this.demoCanvas.height-0;o.x<0?t.addVelocity(new r.W(s,0)):o.x>d&&t.addVelocity(new r.W(-s,0)),o.y<0?t.addVelocity(new r.W(0,s)):o.y>h&&t.addVelocity(new r.W(0,-s))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(A),e.LFG(_.B))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=a(9760);const U=PIXI.Loader.shared;let Z=(()=>{class n{constructor(t,i,s,o){this.demoCanvas=t,this.boidRulesService=i,this.bottomUiService=s,this.assetManager=o,this.BIRD_COUNT=350,this.birds=[]}init(){this.createBirds(),this.boidRulesService.init(this.birds),this.bottomUiService.initSliders()}createBirds(){const t=this.assetManager.boidSprites;for(let i=0;i<this.BIRD_COUNT;i++){const s=u.d.getRandomInt(0,t.length),o=new b(this.bottomUiService,this.demoCanvas,t[s]);this.birds.push(o),this.demoCanvas.addChildToStage(o)}}update(t){this.boidRulesService.update(t)}unloadResources(){U.reset()}onResetClicked(){this.resetBirds()}resetBirds(){this.birds.forEach(t=>{t.init()})}onSliderClicked(t){this.bottomUiService.onSliderClicked(t)}toggleFullscreen(){this.demoCanvas.toggleFullscreen()}onTouch(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.B),e.Y36(E),e.Y36(A),e.Y36(R.me))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-boids"]],features:[e._Bn([E,A])],decls:46,vars:0,consts:[["id","bottom-ui-wrapper",1,"bottom-ui-wrapper"],[1,"sm-visible-block","sm:w-auto"],["id","reset-button",1,"reset-button",3,"click"],["id","bottom-ui-slider-wrapper",1,"bottom-ui-slider-wrapper"],[1,"slider-wrapper"],["for","coherence",1,"slider-label"],["type","range","min","0","max","100","value","50","name","coherence","id","coherence-slider",1,"slider",3,"input"],["for","separation",1,"slider-label"],["type","range","min","0","max","100","value","50","name","separation","id","separation-slider",1,"slider",3,"input"],["for","alignment",1,"slider-label"],["type","range","min","0","max","100","value","50","name","alignment","id","alignment-slider",1,"slider",3,"input"],["for","visualRange",1,"slider-label"],["type","range","min","1","max","100","value","50","name","visualRange","id","visualRange-slider",1,"slider",3,"input"],["for","maxSpeed",1,"slider-label"],["type","range","min","1","max","100","value","50","name","maxSpeed","id","maxSpeed-slider",1,"slider",3,"click"],[1,"relative"],["id","invisible-reset-button"],[1,"reset-button"],[1,"fullscreen-toggle","sm-visible-block","sm:absolute","sm:right-0","sm:bottom-0"],[1,"icon-link","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24","aria-labelledby","boids-fullscreen-toggle-title",1,"fill-demo-ui"],["id","boids-fullscreen-toggle-title"],["d","M24 9h-2v-7h-7v-2h9v9zm-9 15v-2h7v-7h2v9h-9zm-15-9h2v7h7v2h-9v-9zm9-15v2h-7v7h-2v-9h9z"],["id","bottom-buttons",1,"mx-4","mt-8","flex","sm:hidden","justify-between"],[1,"sm-hidden-block"],[1,"fullscreen-toggle","my-auto"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","viewBox","0 0 24 24","aria-labelledby","boids-fullscreen-toggle-title2",1,"fill-demo-ui"],["id","boids-fullscreen-toggle-title2"],["id","color-holder",1,"hidden","bg-demo-ui","text-gray-600"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return i.onResetClicked()}),e._uU(3,"Reset"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"label",5),e._uU(7,"Coherence"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("input",function(o){return i.onSliderClicked(o)}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"label",7),e._uU(11,"Separation"),e.qZA(),e.TgZ(12,"input",8),e.NdJ("input",function(o){return i.onSliderClicked(o)}),e.qZA(),e.qZA(),e.TgZ(13,"div",4),e.TgZ(14,"label",9),e._uU(15,"Alignment"),e.qZA(),e.TgZ(16,"input",10),e.NdJ("input",function(o){return i.onSliderClicked(o)}),e.qZA(),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"label",11),e._uU(19,"Visual range"),e.qZA(),e.TgZ(20,"input",12),e.NdJ("input",function(o){return i.onSliderClicked(o)}),e.qZA(),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"label",13),e._uU(23,"Max Speed"),e.qZA(),e.TgZ(24,"input",14),e.NdJ("click",function(o){return i.onSliderClicked(o)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",15),e.TgZ(26,"div",16),e.TgZ(27,"button",17),e._uU(28,"Reset"),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"a",19),e.NdJ("click",function(){return i.toggleFullscreen()}),e.O4$(),e.TgZ(31,"svg",20),e.TgZ(32,"title",21),e._uU(33,"A button to toggle the full screen mode of this simulation "),e.qZA(),e._UZ(34,"path",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(35,"div",23),e.TgZ(36,"div",24),e.TgZ(37,"button",2),e.NdJ("click",function(){return i.onResetClicked()}),e._uU(38,"Reset"),e.qZA(),e.qZA(),e.TgZ(39,"div",25),e.TgZ(40,"a",19),e.NdJ("click",function(){return i.toggleFullscreen()}),e.O4$(),e.TgZ(41,"svg",26),e.TgZ(42,"title",27),e._uU(43,"A button to toggle the full screen mode of this simulation "),e.qZA(),e._UZ(44,"path",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e._UZ(45,"div",28),e.qZA())},styles:[""]}),n})()}}]);